<!DOCTYPE html>
<html>
<head>
  <script type="text/javascript" src="../Source/Actor.js"></script>
  <script type="text/javascript" src="../Source/Physics.js"></script>
  <script type="text/javascript" src="../Source/Character.js"></script>
</head>

<body>
  <style type="text/css">
    .tg {
      border-collapse: collapse;
      border-spacing: 0;
    }

      .tg td {
        font-family: Arial, sans-serif;
        font-size: 14px;
        padding: 10px 5px;
        border-style: solid;
        border-width: 1px;
        overflow: hidden;
        word-break: normal;
        border-color: black;
      }

      .tg th {
        font-family: Arial, sans-serif;
        font-size: 14px;
        font-weight: normal;
        padding: 10px 5px;
        border-style: solid;
        border-width: 1px;
        overflow: hidden;
        word-break: normal;
        border-color: black;
      }

      .tg .tg-upqx {
        background-color: #ffffff;
        border-color: #cbcefb
      }

      .tg .tg-97fk {
        background-color: #ffffff;
        border-color: #cbcefb;
        vertical-align: top
      }
  </style>
  <table class="tg">
    <tr>
      <th class="tg-upqx">
        <svg id="btnNewCharacter" width="163px" height="163px" viewBox="0 0 163 163">
          <polygon points="141,0 141,141 0,141 0,0" style="fill:#FFFFFF;stroke:none;stroke-width:1" />
          <path stroke="#2F528F" stroke-width="1" fill="#4472C4" d="M42.625,41L54.4375,41C56.0625,41,57.375,42.375,57.375,44L57.375,62 75.0625,62C76.6875,62,78,63.375,78,65L78,77C78,78.6875,76.6875,80,75.0625,80L57.375,80 57.375,98C57.375,99.6875,56.0625,101,54.4375,101L42.625,101C41,101,39.6875,99.6875,39.6875,98L39.6875,80 22,80C20.375,80,19,78.6875,19,77L19,65C19,63.375,20.375,62,22,62L39.6875,62 39.6875,44C39.6875,42.375,41,41,42.625,41z" />
          <path stroke="#000000" stroke-width="1" fill="#6B567A" d="M114.4375,58.9375L115.5625,59 116.5,58.9375 117.5,59 118.625,58.9375 118.9375,59 119.0625,59.0625 121.5625,59.0625C122.6875,59.0625,122.625,60,123.25,61.375C124.4375,65.1875,124.625,66.5,124.5625,69.8125C124.375,71.3125,124.875,73.4375,123.625,73.5625L123.125,73.6875 123.625,73.75C124.5,74.125,125.125,75.0625,125.125,76.0625L125.125,77.6875C125.125,78,125.0625,78.375,124.9375,78.625L124.875,78.6875 125.3125,79.375C126.875,84.75,124.625,92.1875,124.875,101.8125C124.875,102.0625,124.6875,102.375,124.4375,102.625L123.8125,102.9375 124.0625,103.4375 124.0625,104.4375 123.875,104.875 124.0625,104.875C124.625,105.125,124.875,105.5625,125,105.9375C125.3125,108.1875,125.5625,114.25,125.1875,118.0625C124.8125,121.9375,124.8125,124.6875,125.125,128.5C125.1875,128.75,125.125,129.75,125,130.625L124.75,131.5625 124.875,131.75C125,132,125.0625,132.25,125.0625,132.5L125.0625,133.6875C125.0625,133.9375,125,134.1875,124.875,134.375L124.875,134.375 127.0625,134.875C130,135.1875,133.625,136.375,135.375,138.5C135.625,139,137.0625,139.75,134.625,139.9375C130.5,140.125,127.1875,139.9375,123.5,139.875L122,140C121.3125,139.625,120.8125,139.0625,120.4375,138.4375L120.3125,137.6875 121.0625,135.375 120.1875,135C119.875,134.625,119.6875,134.1875,119.6875,133.6875L119.6875,132.5C119.6875,132.25,119.6875,132,119.8125,131.75L120.1875,131.25 120.0625,130.9375C120,130.0625,120,129.125,119.9375,128.875C120,125.3125,119.0625,122.875,118.75,119.0625C118.4375,115.25,117.9375,108.75,118,106C118,105.5,118.3125,105.0625,118.8125,105.0625L119.3125,105 119.0625,104.4375 119.0625,103.4375 119.3125,102.9375 119.0625,102.9375C118.5625,102.9375,118.0625,102.375,118.0625,101.8125C118.0625,94.1875,116.375,84.9375,118.0625,78.9375L118.25,78.375 118.125,77.6875 118.125,76.0625C118.125,75.375,118.4375,74.75,118.875,74.3125L118.9375,74.25 117.875,74.3125 117.5,74.3125 116.5,74.375 115.5625,74.3125 115.1875,74.3125 114.125,74.25 114.1875,74.3125C114.625,74.75,114.9375,75.375,114.9375,76.0625L114.9375,77.6875 114.75,78.375 115,78.9375C116.6875,84.9375,115,94.1875,115,101.8125C115,102.375,114.5,102.9375,114,102.9375L113.75,102.9375 114,103.4375 114,104.4375 113.75,105 114.25,105.0625C114.75,105.0625,115.0625,105.5,115.0625,106C115.0625,108.75,114.625,115.25,114.3125,119.0625C114,122.875,113.0625,125.3125,113.125,128.875C113.0625,129.125,113.0625,130.0625,113,130.9375L112.875,131.25 113.25,131.75C113.375,132,113.375,132.25,113.375,132.5L113.375,133.6875C113.375,134.1875,113.1875,134.625,112.875,135L112,135.375 112.75,137.6875 112.625,138.4375C112.25,139.0625,111.75,139.625,111.0625,140L109.5625,139.875C105.875,139.9375,102.5,140.125,98.4375,139.9375C96,139.75,97.4375,139,97.6875,138.5C99.4375,136.375,103.0625,135.1875,106,134.875L108.1875,134.375 108.1875,134.375C108.0625,134.1875,108,133.9375,108,133.6875L108,132.5C108,132.25,108.0625,132,108.1875,131.75L108.3125,131.5625 108.0625,130.625C107.9375,129.75,107.875,128.75,107.9375,128.5C108.25,124.6875,108.25,121.9375,107.875,118.0625C107.4375,114.25,107.6875,108.1875,108.0625,105.9375C108.1875,105.5625,108.4375,105.125,109,104.875L109.1875,104.875 109,104.4375 109,103.4375 109.25,102.9375 108.625,102.625C108.375,102.375,108.1875,102.0625,108.1875,101.8125C108.4375,92.1875,106.1875,84.75,107.75,79.375L108.125,78.6875 108.125,78.625C108,78.375,107.9375,78,107.9375,77.6875L107.9375,76.0625C107.9375,75.0625,108.5625,74.125,109.4375,73.75L109.9375,73.6875 109.4375,73.5625C108.1875,73.4375,108.6875,71.3125,108.5,69.8125C108.4375,66.5,108.625,65.1875,109.8125,61.375C110.4375,60,110.375,59.0625,111.5,59.0625L114,59.0625 114.125,59z M112.375,54.75L120.6875,54.75C121.25,54.75,121.6875,55.1875,121.6875,55.75L121.6875,57.875C121.6875,58.4375,121.25,58.9375,120.6875,58.9375L112.375,58.9375C111.8125,58.9375,111.375,58.4375,111.375,57.875L111.375,55.75C111.375,55.1875,111.8125,54.75,112.375,54.75z M116.25,34.375C119.125,34.3125,122.1875,34.6875,124.875,35.4375C125.6875,35.75,126.0625,36.3125,126.1875,37L126.25,38.0625 127.0625,37.5C127.375,37.375,127.8125,37.3125,128.1875,37.3125L130.0625,37.3125C131.25,37.3125,132.3125,38,132.75,39.0625L133,40.1875 132.75,41.3125C132.4375,42,131.875,42.5625,131.1875,42.875L130.4375,43 131.125,43.1875C131.375,43.375,131.5625,43.625,131.875,44C133.5625,45.875,132.0625,54.4375,131.75,59.5C131.75,59.875,131.5625,60.1875,131.3125,60.375L130.75,60.625 131.3125,60.8125C131.5625,61.0625,131.75,61.4375,131.75,61.8125C131.75,62.25,131.5625,62.5625,131.3125,62.8125L130.5,63.1875 130.8125,63.25C131.0625,63.375,131.25,63.625,131.5625,64C133.3125,65.6875,132.625,74.375,132.875,79.4375C132.9375,80.125,132.25,80.75,131.6875,80.8125L131.0625,80.875 132.125,81.3125C132.3125,81.4375,132.4375,81.625,132.5,81.875L132.6875,82.5625 132.5,83.1875C132.375,83.5625,132.1875,83.8125,131.875,84L131.375,84.125 131.5625,85.5 131.3125,88C131.3125,90.0625,130.75,92.625,129.375,93.9375C129.0625,94.1875,128.625,95.1875,128.3125,93.5625C127.875,90.75,127.8125,88.5,127.5,85.9375L127.375,84.9375C127.5625,84.4375,127.875,84.0625,128.3125,83.75L128.8125,83.625 128.5625,83.1875C128.5,83,128.4375,82.75,128.4375,82.5625L128.4375,82.5625C128.4375,82.0625,128.625,81.625,128.9375,81.3125L129.875,80.875 129.625,80.875C129,80.75,128.125,80.375,128.125,79.875C126.8125,73.0625,126.1875,68.5,126.5625,64.75C126.6875,64.4375,126.875,63.25,127.5,63.1875L127.6875,63.1875 126.8125,62.8125C126.5,62.5625,126.375,62.25,126.375,61.8125C126.375,61.4375,126.5,61.0625,126.8125,60.8125L127.6875,60.4375 127.5,60.375C127,60.1875,126.625,59.875,126.625,59.5C125.9375,52.625,125.6875,48,126.4375,44.3125C126.5,44.125,126.625,43.8125,126.8125,43.4375L127.5,42.9375 127.0625,42.875C126.5,42.625,126.0625,42.25,125.75,41.8125L125.625,41.5625 123.125,52.3125C122.6875,54.5,122.125,54.75,120.875,54.75L110.8125,54.5625C109.5625,54.5625,109.125,53.125,108.875,51.5625C108.6875,49,108.375,46.875,108.125,45L107.5,41.375 107.3125,41.8125C107,42.25,106.5625,42.625,106,42.875L105.5625,42.9375 106.25,43.4375C106.4375,43.8125,106.5625,44.125,106.625,44.3125C107.375,48,107.125,52.625,106.4375,59.5C106.4375,59.875,106.0625,60.1875,105.5625,60.375L105.375,60.4375 106.25,60.8125C106.5625,61.0625,106.6875,61.4375,106.6875,61.8125C106.6875,62.25,106.5625,62.5625,106.25,62.8125L105.375,63.1875 105.5625,63.1875C106.1875,63.25,106.375,64.4375,106.5,64.75C106.875,68.5,106.25,73.0625,104.9375,79.875C104.9375,80.375,104.0625,80.75,103.4375,80.875L103.1875,80.875 104.125,81.3125C104.4375,81.625,104.625,82.0625,104.625,82.5625L104.625,82.5625C104.625,82.75,104.5625,83,104.5,83.1875L104.25,83.625 104.75,83.75C105.1875,84.0625,105.5,84.4375,105.6875,84.9375L105.5625,85.9375C105.25,88.5,105.1875,90.75,104.75,93.5625C104.4375,95.1875,104,94.1875,103.6875,93.9375C102.3125,92.625,101.75,90.0625,101.75,88L101.5,85.5 101.6875,84.125 101.1875,84C100.875,83.8125,100.6875,83.5625,100.5625,83.1875L100.375,82.5625 100.5625,81.875C100.625,81.625,100.75,81.4375,100.9375,81.3125L102,80.875 101.375,80.8125C100.75,80.75,100.125,80.125,100.1875,79.4375C100.375,74.375,99.75,65.6875,101.5,64C101.8125,63.625,102,63.375,102.25,63.25L102.5625,63.1875 101.75,62.8125C101.5,62.5625,101.3125,62.25,101.3125,61.8125C101.3125,61.4375,101.5,61.0625,101.75,60.8125L102.25,60.625 101.75,60.375C101.5,60.1875,101.3125,59.875,101.3125,59.5C101,54.4375,99.5,45.875,101.1875,44C101.5,43.625,101.6875,43.375,101.9375,43.1875L102.625,43 101.875,42.875C101.1875,42.5625,100.625,42,100.3125,41.3125L100.0625,40.1875 100.3125,39.0625C100.75,38,101.8125,37.3125,103,37.3125L104.875,37.3125C105.25,37.3125,105.6875,37.375,106,37.5L106.875,38.0625 106.8125,37.6875C106.8125,36.75,107.25,35.875,108.6875,35.4375C110.6875,34.75,113.375,34.375,116.25,34.375z M116.5,13L117.125,13.1875 117.3125,13.125 118.3125,13.25C120.0625,13.6875,121.6875,14.875,122.625,16.875C123.625,18.625,122.4375,23.4375,121,27.625C120.5625,28.875,120.3125,29.75,120.0625,30.375L119.5,31.4375 119.75,31.5625C119.9375,31.75,120.0625,32,120.0625,32.25L120.0625,33.25C120.0625,33.75,119.625,34.1875,119.0625,34.1875L114,34.1875C113.4375,34.1875,113,33.75,113,33.25L113,32.25C113,32,113.125,31.75,113.3125,31.5625L113.5625,31.4375 113,30.375C112.75,29.75,112.5,28.875,112.0625,27.625C110.625,23.4375,109.4375,18.625,110.4375,16.875C111.375,14.875,113,13.6875,114.75,13.25L115.75,13.125 115.9375,13.1875z" />
          <polygon points="141,0 141,141 0,141 0,0" style="fill:none;stroke:#F2F2F2;stroke-width:1" />
        </svg>

      </th>
      <th class="tg-upqx" colspan="3"></th>
      <th class="tg-97fk"></th>
    </tr>
    <tr>
      <td class="tg-97fk">
        Folder: <input type="text" value="Clyde" id="folderName"><br><br>
        Base File Name: <input value="WalkFrame" type="text" id="baseFileName"><br><br>
        Count: <input type="text" value="25" id="frameCount"><br><br>
        <button type="button" onclick="Load()">Load!</button>
      </td>
      <td class="tg-97fk" colspan="3">
        <canvas id="myCanvas" width="600" height="480" style="border:1px solid #C0C0C0;"></canvas>
      </td>
      <td class="tg-97fk"></td>
    </tr>
    <tr>
      <td class="tg-upqx"></td>
      <td class="tg-upqx"><button type="button" onclick="advanceFrameBackward()">&lt;&lt;</button></td>
      <td class="tg-97fk"><input type="text" value="0" id="frameNumber" onchange="frameNumberTextChanged"></td>
      <td class="tg-97fk"><button type="button" onclick="advanceFrameForward()">&gt;&gt;</button></td>
      <td class="tg-97fk"></td>
    </tr>
  </table>

  <script>
    var frameIndex = 0;
    var folderName;
    var baseFileName;
    var frameCount;
    var backgroundFrameImage;
    var scale = 0.5;

    function Load() {
      folderName = document.getElementById("folderName").value;
      baseFileName = document.getElementById("baseFileName").value;
      frameCount = document.getElementById("frameCount").value;

      backgroundFrameImage = new Image();
      backgroundFrameImage.onload = function () {
        myCanvas.width = backgroundFrameImage.width * scale;
        myCanvas.height = backgroundFrameImage.height * scale;
        refresh();
      };
      loadImage();
    }

    function loadImage() {
      if (backgroundFrameImage)
        backgroundFrameImage.src = folderName + '/' + baseFileName + frameIndex + '.png';
    }

    function refresh() {
      ctx.drawImage(backgroundFrameImage, 0, 0, backgroundFrameImage.width * scale, backgroundFrameImage.height * scale);
      character.draw(ctx);
    }

    function frameNumberTextChanged() {
      setFrameIndex(frameIndexTextBox.value);
    }

    function setFrameIndex(newIndex) {
      if (frameIndex == newIndex) {
        return;
      }
      frameIndex = newIndex;
      frameIndexChanged();
    }

    function frameIndexChanged() {
      loadImage();
      updateFrameNumber();
      refresh();
    }

    function advanceFrameForward() {
      frameIndex++;
      if (frameIndex >= frameCount)
        frameIndex = 0;
      frameIndexChanged();
    }

    function advanceFrameBackward() {
      frameIndex--;
      if (frameIndex < 0)
        frameIndex = frameCount - 1;
      frameIndexChanged();
    }

    function updateFrameNumber() {
      frameIndexTextBox.value = frameIndex;
    }

    function hasClass(childElement, className) {
      for (var index = 0; index < childElement.classList.length; index++) {
        var thisClassName = childElement.classList[index];
        if (thisClassName == className)
          return true;
      }
      return false;
    }

    function getBackground(button) {
      if (button.children.length > 0)
        return button.children[0];
    }

    function getForeground(button) {
      if (button.children.length > 0)
        return button.children[button.children.length - 1];
    }

    function mouseOver(e) {
      var parentButton = e.currentTarget.parentButton;
      var background = getBackground(parentButton);
      background.style.fill = "#fcf5c4";
    }

    function addButton(buttonName, clickFunction) {
      var button = document.getElementById(buttonName);
      button.addEventListener("click", clickFunction);
      
      for (var index = 0; index < button.children.length; index++)
      {
        var childElement = button.children[index];
        childElement.addEventListener("mouseover", mouseOver);
        childElement.parentButton = button;
      }
    }

    function createNewCharacter(e) {
      console.log("Clicked!");
    }

    var frameIndexTextBox = document.getElementById("frameNumber");

    addButton("btnNewCharacter", createNewCharacter);
    
    var myCanvas = document.getElementById("myCanvas");
    var ctx = myCanvas.getContext("2d");
    var character = new Character("clyde", "ClydeTorsoBack.svg");
    gravity = 0;
  </script>
</body>
</html>
